<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="gr.greekbudget.ChartsController"
            styleClass="orange-background">

    <!-- ================= LEFT MENU ================= -->
    <left>
        <VBox spacing="15"
              alignment="TOP_CENTER"
              prefWidth="180"
              styleClass="filter-bar">

            <padding>
                <Insets top="20" left="10" right="10" bottom="20"/>
            </padding>

            <Label text="Γραφήματα"
                   style="-fx-font-size: 20px; -fx-font-weight: bold;"/>

            <Separator/>

            <Label text="Έτος"
                   style="-fx-font-size: 15px;"/>
            <ComboBox fx:id="yearComboBox"
                      prefWidth="140"/>

            <Button text="Back"
                    onAction="#goBack"
                    prefWidth="120"
                    styleClass="btn-orange-small"/>

            <Separator/>

            <!-- Spacer -->
            <Region prefHeight="40"/>

            <!-- Instruction box -->
            <VBox spacing="6"
                  alignment="CENTER"
                  style="
                      -fx-background-color: rgba(255,255,255,0.25);
                      -fx-background-radius: 10;
                      -fx-padding: 10;
                  "
                  maxWidth="160">

                <Label text="Πατήστε το κουμπί Export to PDF και επιλέξτε ποια διαγράμματα θέλετε να κατεβάσετε σε PDF για προσωπική χρήση."
                       wrapText="true"
                       textAlignment="CENTER"
                       style="
                           -fx-font-size: 13px;
                           -fx-font-weight: bold;
                           -fx-text-fill: #4a2600;
                       "/>
            </VBox>

            <Region prefHeight="10"/>

            <Button text="Export to PDF"
                    onAction="#exportPdf"
                    prefWidth="150"
                    styleClass="btn-orange-small"/>

            <Separator/>

        </VBox>
    </left>

    <!-- ================= CENTER CONTENT ================= -->
    <center>
        <ScrollPane fitToWidth="true"
                    hbarPolicy="NEVER">

            <VBox spacing="30"
                  alignment="TOP_CENTER"
                  fillWidth="true">

                <padding>
                    <Insets top="20" right="30" bottom="30" left="30"/>
                </padding>

                <Label text="Στατιστικά Προϋπολογισμού"
                       style="-fx-font-size: 28px; -fx-font-weight: bold;"/>

                <TitledPane text="Έσοδα ανά Έτος"
                            expanded="true"
                            prefWidth="900">
                    <LineChart fx:id="revenueChart"
                               prefHeight="280"
                               animated="false">
                        <xAxis>
                            <CategoryAxis label="Έτος"/>
                        </xAxis>
                        <yAxis>
                            <NumberAxis label="Ποσό (€)"/>
                        </yAxis>
                    </LineChart>
                </TitledPane>

                <TitledPane text="Έξοδα ανά Έτος"
                            expanded="true"
                            prefWidth="900">
                    <LineChart fx:id="expenseChart"
                               prefHeight="280"
                               animated="false">
                        <xAxis>
                            <CategoryAxis label="Έτος"/>
                        </xAxis>
                        <yAxis>
                            <NumberAxis label="Ποσό (€)"/>
                        </yAxis>
                    </LineChart>
                </TitledPane>

                <TitledPane text="Σύνοψη Προϋπολογισμού ανά Έτος"
                            expanded="true"
                            prefWidth="900">
                    <HBox fx:id="budgetDonutBox"
                          spacing="30"
                          alignment="CENTER">
                        <padding>
                            <Insets top="20" right="20" bottom="20" left="20"/>
                        </padding>
                    </HBox>
                </TitledPane>

                <TitledPane text="Δαπάνες ανά Υπουργείο"
                            expanded="true"
                            prefWidth="900">

                    <VBox spacing="25"
                          alignment="TOP_CENTER">

                        <Label text="Όλα τα Υπουργεία"
                               style="-fx-font-size: 16px; -fx-font-weight: bold;"/>

                        <HBox spacing="20"
                              alignment="TOP_CENTER">
                            <PieChart fx:id="ministryChartAll"
                                      prefWidth="360"
                                      prefHeight="260"
                                      labelsVisible="false"/>
                            <VBox fx:id="legendBoxAll"
                                  spacing="6"/>
                        </HBox>

                        <Separator/>

                        <Label text="Χωρίς Υπουργείο Οικονομικών"
                               style="-fx-font-size: 16px; -fx-font-weight: bold;"/>

                        <HBox spacing="20"
                              alignment="TOP_CENTER">
                            <PieChart fx:id="ministryChartNoFinance"
                                      prefWidth="360"
                                      prefHeight="260"
                                      labelsVisible="false"/>
                            <VBox fx:id="legendBoxNoFinance"
                                  spacing="6"/>
                        </HBox>

                        <Separator/>

                        <Label text="Εξέλιξη Υπουργείου στον Χρόνο"
                               style="-fx-font-size: 18px; -fx-font-weight: bold;"/>

                        <Label fx:id="trendHintLabel"
                               text="Επιλέξτε υπουργείο για να δείτε την εξέλιξή του στον χρόνο."
                               wrapText="true"
                               style="-fx-font-size: 14px;"
                               maxWidth="650"/>

                        <HBox spacing="10"
                              alignment="CENTER_LEFT">
                            <Label text="Υπουργείο:"/>
                            <ComboBox fx:id="trendMinistryComboBox"
                                      prefWidth="300"/>

                            <Button text="Reset"
                                    fx:id="trendResetButton"
                                    styleClass="btn-orange-small"/>
                        </HBox>

                        <BarChart fx:id="ministryTrendChart"
                                  prefWidth="900"
                                  prefHeight="320"
                                  animated="false"
                                  visible="false"
                                  managed="false">
                            <xAxis>
                                <CategoryAxis label="Έτος"/>
                            </xAxis>
                            <yAxis>
                                <NumberAxis fx:id="trendYAxis"
                                            label="Ποσό (€)"/>
                            </yAxis>
                        </BarChart>

                    </VBox>
                </TitledPane>

            </VBox>
        </ScrollPane>
    </center>

</BorderPane>
